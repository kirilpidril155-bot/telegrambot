<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>GiftShop ‚Äî Premium Store</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <!-- Home Page -->
        <div id="page-home" class="page active">
            <div class="app-header">
                <h1>üéÅ GiftShop</h1>
                <div class="subtitle">Premium delivery service</div>
            </div>
            
            <div class="glass-card">
                <h3 class="text-center mb-16">üèôÔ∏è –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏</h3>
                <div class="city-grid" id="cityGrid"></div>
            </div>
        </div>

        <!-- Products Page -->
        <div id="page-products" class="page">
            <div class="app-header">
                <h1>üõçÔ∏è –¢–æ–≤–∞—Ä—ã</h1>
                <div class="city-info-card">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div class="city-badge">
                                üìç –ì–æ—Ä–æ–¥: <span id="selectedCityText">–ú–æ—Å–∫–≤–∞</span>
                            </div>
                        </div>
                        <div style="color: var(--text-secondary); font-size: 14px;">
                    
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="glass-card">
                <button class="city-change-btn" onclick="goToHome()">
                    üèôÔ∏è –°–º–µ–Ω–∏—Ç—å –≥–æ—Ä–æ–¥
                </button>
                <div id="categoriesContainer"></div>
            </div>
        </div>

        <!-- Cart Page -->
        <div id="page-cart" class="page">
            <div class="app-header">
                <h1>üõí –ö–æ—Ä–∑–∏–Ω–∞</h1>
                <div class="subtitle" id="cartCity">–ì–æ—Ä–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏: –Ω–µ –≤—ã–±—Ä–∞–Ω</div>
            </div>
            
            <div class="glass-card">
                <div id="cartList" class="cart-list"></div>
                
                <div class="mt-16">
                    <div style="font-size: 24px; font-weight: 800; text-align: center; margin-bottom: 8px;">
                        –ò—Ç–æ–≥–æ: <span id="totalGBP">0</span> ‚ÇΩ
                    </div>
                    <div class="text-muted text-center" id="totalConverted"></div>
                    
                    <div style="display: flex; gap: 12px; margin-top: 20px; flex-wrap: wrap;">
                        <button class="btn danger" onclick="clearCart()" style="flex: 1;">
                            üóë –û—á–∏—Å—Ç–∏—Ç—å
                        </button>
                        <button class="btn primary" onclick="openPayModal()" style="flex: 2;">
                            üí≥ –û–ø–ª–∞—Ç–∏—Ç—å
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment Check Page -->
        <div id="page-payment-check" class="page">
            <div class="status-page">
                <div class="status-icon">‚è≥</div>
                <div class="status-title">–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–ª–∞—Ç–µ–∂</div>
                <div class="status-message" id="paymentStatusMessage">
                    –û–∂–∏–¥–∞–µ–º –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –∫–æ—à–µ–ª–µ–∫...
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                
                <div class="live-logs" id="liveLogs">
                    <div class="log-entry">
                        <span class="log-time" id="currentTime"></span>
                        <span class="log-info">üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π...</span>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <button class="btn primary" onclick="checkPaymentStatus()">
                        üîÑ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–Ω–æ–≤–∞
                    </button>
                    <button class="btn secondary" onclick="openPage('page-home')" style="margin-top: 12px;">
                        –ù–∞ –≥–ª–∞–≤–Ω—É—é
                    </button>
                </div>
            </div>
        </div>

        <!-- Payment Success Page -->
        <div id="page-payment-success" class="page">
            <div class="status-page">
                <div class="status-icon">üéâ</div>
                <div class="status-title">–û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞!</div>
                <div class="status-message">
                    ‚úÖ <strong>–í–∞—à –∑–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ–ø–ª–∞—á–µ–Ω –∏ –ø—Ä–∏–Ω—è—Ç –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É!</strong>
                </div>
                
                <div class="glass-card" style="text-align: left;">
                    <h3 style="margin-bottom: 16px; color: var(--primary);">–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞</h3>
                    <div id="orderItemsList"></div>
                    <div style="display: flex; justify-content: space-between; padding: 16px 0; font-weight: 800; font-size: 18px; border-top: 2px solid var(--border); margin-top: 8px;">
                        <span>–ò—Ç–æ–≥–æ:</span>
                        <span id="orderTotalAmount">0 ¬£</span>
                    </div>
                </div>
                
                <div class="glass-card" style="text-align: left; margin-top: 16px;">
                    <h4 style="margin-bottom: 12px; color: var(--success);">üì¶ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ</h4>
                    <div style="margin-bottom: 12px;">
                        <strong>üèô –ì–æ—Ä–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏:</strong><br>
                        <span id="deliveryCity">‚Äî</span>
                    </div>
                    <div style="margin-bottom: 12px;">
                        <strong>‚è∞ –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏:</strong><br>
                        <span>24 —á–∞—Å–∞ —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</span>
                    </div>
                    <div>
                        <strong>üöö –°—Ç–∞—Ç—É—Å:</strong><br>
                        <span style="color: var(--success); font-weight: 800;">‚úÖ –ó–∞–∫–∞–∑ —Å–æ–±—Ä–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ</span>
                    </div>
                </div>
                
                <button class="btn success" onclick="openPage('page-home')" style="margin-top: 24px;">
                    üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
                </button>
            </div>
        </div>
    </div>

    <!-- Floating Cart -->
    <div id="cartFloat" class="cart-float hidden">
        <div>
            <div style="font-weight: 800; font-size: 16px;">–í –∫–æ—Ä–∑–∏–Ω–µ: <span id="cartCount">0</span> —à—Ç</div>
            <div class="text-muted">–°—É–º–º–∞: <span id="cartSum">0</span> ‚ÇΩ</div>
        </div>
        <button class="btn primary" onclick="openPage('page-cart')">
            –û—Ç–∫—Ä—ã—Ç—å
        </button>
    </div>

    <!-- Payment Modal -->
    <div id="payModal" style="display: none;">
        <div class="modal-back" id="modalBack">
            <div class="modal">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div style="font-weight: 800; font-size: 20px;">üí≥ –û–ø–ª–∞—Ç–∞</div>
                    <button onclick="closePayModal()" style="background: none; border: none; color: var(--text-secondary); font-size: 20px; cursor: pointer; padding: 4px;">‚úï</button>
                </div>
                
                <div class="text-muted" style="margin-bottom: 16px;">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É –∏ —Å–µ—Ç—å</div>
                
                <div class="currency-grid" id="currencyList"></div>
                
                <div style="margin: 20px 0;">
                    <div class="text-muted" style="margin-bottom: 8px;">–°–µ—Ç—å:</div>
                    <div class="network-buttons" id="networkButtons"></div>
                </div>
                
                <div id="manualPayment">
                    <div style="background: var(--bg-secondary); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                        <div class="text-muted">–°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ:</div>
                        <div style="font-weight: 800; font-size: 18px;" id="paySummary"></div>
                    </div>
                    
                    <div class="text-muted">–ê–¥—Ä–µ—Å –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞:</div>
                    <div style="word-break: break-all; margin: 8px 0; background: var(--bg-primary); padding: 12px; border-radius: 8px; font-size: 12px; border: 1px solid var(--border);" id="walletAddr"></div>
                    
                    <button class="btn secondary" onclick="copyWallet()" style="width: 100%; margin-bottom: 12px;">
                        üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å
                    </button>
                    
                    <div style="display: flex; gap: 8px;">
                        <button class="btn success" onclick="payConfirmManual()" style="flex: 2;">
                            ‚úÖ –Ø –æ–ø–ª–∞—Ç–∏–ª
                        </button>
                        <button class="btn" onclick="closePayModal()" style="flex: 1;">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <div class="nav-item active" data-page="page-home" onclick="navTo(this)">
            <div class="nav-icon">üè†</div>
            <div>–ì–ª–∞–≤–Ω–∞—è</div>
        </div>
        <div class="nav-item" data-page="page-products" onclick="navTo(this)">
            <div class="nav-icon">üõç</div>
            <div>–¢–æ–≤–∞—Ä—ã</div>
        </div>
        <div class="nav-item" data-page="page-cart" onclick="navTo(this)">
            <div class="nav-icon">üõí</div>
            <div>–ö–æ—Ä–∑–∏–Ω–∞</div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/products.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/payment.js"></script>
    <script src="js/app.js"></script>
</body>
</html>